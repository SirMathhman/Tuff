// Test for bug: Tuff compiler allows tuple returns that produce invalid JS
// When a function returns a tuple without explicit type information,
// the compiler may generate invalid JavaScript code that can't be executed.
// This test checks whether untyped tuple returns are properly validated.

from std::test use { reset, suite, it, expect_eq, summary, status };

fn make_tuple(x: I32) => {
  ("hello", x)
}

fn main() : I32 => {
  reset();
  suite("tuple return JS validity");

  // This should either:
  // 1. Compile to valid JS that executes correctly, OR
  // 2. Be rejected by the Tuff compiler with a clear error about untyped tuple returns
  let result = make_tuple(42);
  it("access first element of tuple", expect_eq("first", result.0, "hello"));
  it("access second element of tuple", expect_eq("second", result.1, 42));

  summary();
  status()
}
